<h3 class="mb-5">{{ stockAddTitle }}</h3>
<hr>

<div class="card mb-4 p-4">
    <div class="card-title">
        <h5>Control de Ingreso</h5>
    </div>

    <form [formGroup]="parentForm" (ngSubmit)="onSubmit()">

        <div class="mb-3">
            <h5 >Producto: {{ parentForm.get('product')?.value }}</h5>
            <input
                type="text"
                class="form-control"
                placeholder="Nombre del Producto"
                formControlName="product">

            <small *ngIf="parentForm.get('product')?.touched && parentForm.get('product')?.errors" class="text-danger">
                <span *ngIf="parentForm.get('product')?.hasError('required')">El nombre es obligatorio.</span>
                <span *ngIf="parentForm.get('product')?.hasError('minlength')">Debe tener al menos 5 caracteres.</span>
            </small>
        </div>

        <div class="mb-3">
            <h5>Cantidad: {{ parentForm.get('cuantity')?.value }}</h5>
            <input
                type="number"
                class="form-control"
                placeholder="Cantidad"
                formControlName="cuantity">

            <small *ngIf="parentForm.get('cuantity')?.touched && parentForm.get('cuantity')?.hasError('min')" class="text-danger">
                La cantidad mínima debe ser 1.
            </small>
        </div>

        <div class="mb-3">
            <h5>Existencia Mínima: {{ parentForm.get('existance')?.value }}</h5>
            <input
                type="number"
                class="form-control"
                placeholder="Existencia Mínima"
                formControlName="existance">
        </div>

        <button class="btn btn-success mt-3" type="submit" [disabled]="parentForm.invalid">
            Guardar Stock
        </button>
    </form>
</div>


<div class="card p-4">
    <div class="card-title">
        <h5>Inventario Actual</h5>
    </div>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Producto</th>
                <th>Cantidad</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of stockList()">
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.cuantity }}</td>
            </tr>
        </tbody>
    </table>

    <div *ngIf="stockList()?.length === 0" class="alert alert-info text-center">
         No hay items en el inventario.
    </div>
</div>
